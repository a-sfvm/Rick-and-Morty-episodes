{"ast":null,"code":"import { Kind } from 'graphql';\nimport { CONTENT_TYPE_GQL, CONTENT_TYPE_JSON } from '../../lib/http.js';\nimport { isPlainObject } from '../../lib/prelude.js';\n/**\n * Clean a GraphQL document to send it via a GET query\n */\n\nexport const cleanQuery = str => str.replace(/([\\s,]|#[^\\n\\r]+)+/g, ` `).trim();\nexport const isGraphQLContentType = contentType => {\n  const contentTypeLower = contentType.toLowerCase();\n  return contentTypeLower.includes(CONTENT_TYPE_GQL) || contentTypeLower.includes(CONTENT_TYPE_JSON);\n};\nexport const parseGraphQLExecutionResult = result => {\n  try {\n    if (Array.isArray(result)) {\n      return {\n        _tag: `Batch`,\n        executionResults: result.map(parseExecutionResult)\n      };\n    } else if (isPlainObject(result)) {\n      return {\n        _tag: `Single`,\n        executionResult: parseExecutionResult(result)\n      };\n    } else {\n      throw new Error(`Invalid execution result: result is not object or array. \\nGot:\\n${String(result)}`);\n    }\n  } catch (e) {\n    return e;\n  }\n};\n/**\n * Example result:\n *\n * ```\n * {\n *  \"data\": null,\n *  \"errors\": [{\n *    \"message\": \"custom error\",\n *    \"locations\": [{ \"line\": 2, \"column\": 3 }],\n *    \"path\": [\"playerNew\"]\n *  }]\n * }\n * ```\n */\n\nexport const parseExecutionResult = result => {\n  if (typeof result !== `object` || result === null) {\n    throw new Error(`Invalid execution result: result is not object`);\n  }\n\n  let errors = undefined;\n  let data = undefined;\n  let extensions = undefined;\n\n  if (`errors` in result) {\n    if (!isPlainObject(result.errors) && !Array.isArray(result.errors)) {\n      throw new Error(`Invalid execution result: errors is not plain object OR array`); // prettier-ignore\n    }\n\n    errors = result.errors;\n  } // todo add test coverage for case of null. @see https://github.com/jasonkuhrt/graphql-request/issues/739\n\n\n  if (`data` in result) {\n    if (!isPlainObject(result.data) && result.data !== null) {\n      throw new Error(`Invalid execution result: data is not plain object`); // prettier-ignore\n    }\n\n    data = result.data;\n  }\n\n  if (`extensions` in result) {\n    if (!isPlainObject(result.extensions)) throw new Error(`Invalid execution result: extensions is not plain object`); // prettier-ignore\n\n    extensions = result.extensions;\n  }\n\n  return {\n    data,\n    errors,\n    extensions\n  };\n};\nexport const isRequestResultHaveErrors = result => result._tag === `Batch` ? result.executionResults.some(isExecutionResultHaveErrors) : isExecutionResultHaveErrors(result.executionResult);\nexport const isExecutionResultHaveErrors = result => Array.isArray(result.errors) ? result.errors.length > 0 : Boolean(result.errors);\nexport const isOperationDefinitionNode = definition => {\n  return typeof definition === `object` && definition !== null && `kind` in definition && definition.kind === Kind.OPERATION_DEFINITION;\n};","map":{"version":3,"mappings":"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","names":["Kind","CONTENT_TYPE_GQL","CONTENT_TYPE_JSON","isPlainObject","cleanQuery","str","replace","trim","isGraphQLContentType","contentType","contentTypeLower","toLowerCase","includes","parseGraphQLExecutionResult","result","Array","isArray","_tag","executionResults","map","parseExecutionResult","executionResult","Error","String","e","errors","undefined","data","extensions","isRequestResultHaveErrors","some","isExecutionResultHaveErrors","length","Boolean","isOperationDefinitionNode","definition","kind","OPERATION_DEFINITION"],"sources":["/Users/admin/code/language-finder/node_modules/graphql-request/src/legacy/lib/graphql.ts"],"sourcesContent":["import { Kind } from 'graphql'\nimport { CONTENT_TYPE_GQL, CONTENT_TYPE_JSON } from '../../lib/http.js'\nimport { isPlainObject } from '../../lib/prelude.js'\n/**\n * Refactored imports from `graphql` to be more specific, this helps import only the required files (100KiB)\n * instead of the entire package (greater than 500KiB) where tree-shaking is not supported.\n * @see https://github.com/jasonkuhrt/graphql-request/pull/543\n */\nimport type { OperationDefinitionNode } from 'graphql'\n\n/**\n * Clean a GraphQL document to send it via a GET query\n */\nexport const cleanQuery = (str: string): string => str.replace(/([\\s,]|#[^\\n\\r]+)+/g, ` `).trim()\n\nexport const isGraphQLContentType = (contentType: string) => {\n  const contentTypeLower = contentType.toLowerCase()\n\n  return contentTypeLower.includes(CONTENT_TYPE_GQL) || contentTypeLower.includes(CONTENT_TYPE_JSON)\n}\n\nexport type GraphQLRequestResult = GraphQLRequestResultBatch | GraphQLRequestResultSingle\nexport type GraphQLRequestResultBatch = { _tag: 'Batch'; executionResults: GraphQLExecutionResultBatch }\nexport type GraphQLRequestResultSingle = { _tag: 'Single'; executionResult: GraphQLExecutionResultSingle }\n\nexport type GraphQLExecutionResult = GraphQLExecutionResultSingle | GraphQLExecutionResultBatch\nexport type GraphQLExecutionResultBatch = GraphQLExecutionResultSingle[]\nexport type GraphQLExecutionResultSingle = {\n  data: object | null | undefined\n  errors: undefined | object | object[]\n  extensions?: object\n}\n\nexport const parseGraphQLExecutionResult = (result: unknown): Error | GraphQLRequestResult => {\n  try {\n    if (Array.isArray(result)) {\n      return {\n        _tag: `Batch`,\n        executionResults: result.map(parseExecutionResult),\n      }\n    } else if (isPlainObject(result)) {\n      return {\n        _tag: `Single`,\n        executionResult: parseExecutionResult(result),\n      }\n    } else {\n      throw new Error(`Invalid execution result: result is not object or array. \\nGot:\\n${String(result)}`)\n    }\n  } catch (e) {\n    return e as Error\n  }\n}\n\n/**\n * Example result:\n *\n * ```\n * {\n *  \"data\": null,\n *  \"errors\": [{\n *    \"message\": \"custom error\",\n *    \"locations\": [{ \"line\": 2, \"column\": 3 }],\n *    \"path\": [\"playerNew\"]\n *  }]\n * }\n * ```\n */\nexport const parseExecutionResult = (result: unknown): GraphQLExecutionResultSingle => {\n  if (typeof result !== `object` || result === null) {\n    throw new Error(`Invalid execution result: result is not object`)\n  }\n\n  let errors = undefined\n  let data = undefined\n  let extensions = undefined\n\n  if (`errors` in result) {\n    if (!isPlainObject(result.errors) && !Array.isArray(result.errors)) {\n      throw new Error(`Invalid execution result: errors is not plain object OR array`) // prettier-ignore\n    }\n    errors = result.errors\n  }\n\n  // todo add test coverage for case of null. @see https://github.com/jasonkuhrt/graphql-request/issues/739\n  if (`data` in result) {\n    if (!isPlainObject(result.data) && result.data !== null) {\n      throw new Error(`Invalid execution result: data is not plain object`) // prettier-ignore\n    }\n    data = result.data\n  }\n\n  if (`extensions` in result) {\n    if (!isPlainObject(result.extensions)) throw new Error(`Invalid execution result: extensions is not plain object`) // prettier-ignore\n    extensions = result.extensions\n  }\n\n  return {\n    data,\n    errors,\n    extensions,\n  }\n}\n\nexport const isRequestResultHaveErrors = (result: GraphQLRequestResult) =>\n  result._tag === `Batch`\n    ? result.executionResults.some(isExecutionResultHaveErrors)\n    : isExecutionResultHaveErrors(result.executionResult)\n\nexport const isExecutionResultHaveErrors = (result: GraphQLExecutionResultSingle) =>\n  Array.isArray(result.errors) ? result.errors.length > 0 : Boolean(result.errors)\n\nexport const isOperationDefinitionNode = (definition: unknown): definition is OperationDefinitionNode => {\n  return (\n    typeof definition === `object`\n    && definition !== null\n    && `kind` in definition\n    && definition.kind === Kind.OPERATION_DEFINITION\n  )\n}\n"]},"metadata":{},"sourceType":"module"}